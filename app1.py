import streamlit as st
import openai

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
st.set_page_config(page_title="LinguistAI Pro", page_icon="üåç")

st.title("üåç LinguistAI: Global Market Entry")
st.markdown("### –ê–¥–∞–ø—Ç–∏—Ä–∞–π—Ç–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ —Å–∏ –∑–∞ –°–ê–©, –ï–≤—Ä–æ–ø–∞ –∏ –ë—ä–ª–≥–∞—Ä–∏—è")

# –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
api_key = st.sidebar.text_input("OpenAI API Key", type="password")
target_market = st.selectbox("–¶–µ–ª–µ–≤–∏ –ø–∞–∑–∞—Ä:", ["–°–ê–© (English US)", "–ë—ä–ª–≥–∞—Ä–∏—è (Bulgarian)", "–ì–µ—Ä–º–∞–Ω–∏—è (German)", "–§—Ä–∞–Ω—Ü–∏—è (French)"])
tone = st.select_slider("–¢–æ–Ω –Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è:", options=["–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω", "–ü—Ä–∏—è—Ç–µ–ª—Å–∫–∏", "–ê–≥—Ä–µ—Å–∏–≤–µ–Ω –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥"])
original_text = st.text_area("–í—ä–≤–µ–¥–µ—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è —Ç–µ–∫—Å—Ç (–Ω–∞ –∫–∞–∫—ä–≤—Ç–æ –∏ –¥–∞ –µ –µ–∑–∏–∫):", height=200)

if st.button("–ì–ª–æ–±–∞–ª–∏–∑–∏—Ä–∞–π —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ"):
    if not api_key:
        st.error("–ú–æ–ª—è, –ø–æ—Å—Ç–∞–≤–µ—Ç–µ API –∫–ª—é—á.")
    else:
        openai.api_key = api_key
        with st.spinner('–ê–¥–∞–ø—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç–∞ —Å–ø–æ—Ä–µ–¥ –º–µ—Å—Ç–Ω–∞—Ç–∞ –∫—É–ª—Ç—É—Ä–∞...'):
            prompt = f"""
            –¢–∏ —Å–∏ –µ–∫—Å–ø–µ—Ä—Ç –ø–æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–µ–Ω –º–∞—Ä–∫–µ—Ç–∏–Ω–≥. –ü—Ä–µ–≤–µ–¥–∏ –∏ –∞–¥–∞–ø—Ç–∏—Ä–∞–π —Å–ª–µ–¥–Ω–∏—è —Ç–µ–∫—Å—Ç –∑–∞ –ø–∞–∑–∞—Ä–∞ –≤ {target_market}.
            –¢–æ–Ω—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ {tone}. 
            –£–≤–µ—Ä–∏ —Å–µ, —á–µ:
            1. –ò–∑–ø–æ–ª–∑–≤–∞—à –º–µ—Å—Ç–Ω–∏ –∏–¥–∏–æ–º–∏ –∏ –∏–∑—Ä–∞–∑–∏.
            2. –¢–µ–∫—Å—Ç—ä—Ç –∑–≤—É—á–∏ –Ω–∞—Ç–∏–≤–Ω–æ, –∞ –Ω–µ –∫–∞—Ç–æ –ø—Ä–µ–≤–æ–¥.
            3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–∞–π –≥–æ –∑–∞ —Ç—ä—Ä—Å–∞—á–∫–∏—Ç–µ (SEO) –≤ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∞—Ç–∞ –¥—ä—Ä–∂–∞–≤–∞.
            –¢–µ–∫—Å—Ç –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞: {original_text}
            """
            
            response = openai.ChatCompletion.create(
                model="gpt-4o", # –ò–∑–ø–æ–ª–∑–≤–∞–º–µ –Ω–∞–π-–Ω–æ–≤–∏—è –º–æ–¥–µ–ª –∑–∞ –º–∞–∫—Å–∏–º–∞–ª–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ
                messages=[{"role": "user", "content": prompt}]
            )
            
            result = response.choices[0].message.content
            st.success("–ì–æ—Ç–æ–≤–æ! –í–∞—à–µ—Ç–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –µ –ª–æ–∫–∞–ª–∏–∑–∏—Ä–∞–Ω–æ:")
            st.write(result)
            st.download_button("–ò–∑—Ç–µ–≥–ª–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞", result)
